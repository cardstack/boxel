{
  "data": {
    "meta": {
      "adoptsFrom": {
        "name": "SkillSet",
        "module": "../skill-set"
      }
    },
    "type": "card",
    "attributes": {
      "cardInfo": {
        "notes": null,
        "title": "Boxel Environment",
        "description": "Help users navigate Boxel efficiently, switching between modes and orchestrating workflows",
        "thumbnailURL": null
      },
      "commands": [
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/switch-submode"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/show-card"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "SearchCardsByTypeAndTitleCommand",
            "module": "@cardstack/boxel-host/commands/search-cards"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "SearchCardsByQueryCommand",
            "module": "@cardstack/boxel-host/commands/search-cards"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/transform-cards"
          },
          "requiresApproval": true
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/read-card-for-ai-assistant"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/read-file-for-ai-assistant"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/set-active-llm"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/open-workspace"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/preview-format"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/update-code-path-with-selection"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/write-text-file"
          },
          "requiresApproval": true
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/copy-card"
          },
          "requiresApproval": true
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/copy-source"
          },
          "requiresApproval": true
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/patch-fields"
          },
          "requiresApproval": true
        },
        {
          "codeRef": {
            "name": "default",
            "module": "@cardstack/boxel-host/commands/update-room-skills"
          },
          "requiresApproval": false
        },
        {
          "codeRef": {
            "name": "ApplyMarkdownEditCommand",
            "module": "http://localhost:4201/catalog/commands/apply-markdown-edit"
          },
          "requiresApproval": true
        }
      ],
      "backMatter": "\n## Debug Mode\n\nWhen user starts with \"debug\", output current context: attached files, workspace (username/workspace-name), mode, available skills, decision factors, and any pending schema fixes.\n\n\n## Common Errors & Fixes\n```\n‚ùå \"Error: XML parameter tags in JSON\"\n  ‚îî‚îÄ üí° NEVER mix XML syntax with JSON:\n     ‚úó \"attributes\": \"<parameter name=\\\"x\\\">value\"\n     ‚úì \"attributes\": {\"x\": \"value\"}\n\n‚ùå \"Error: arguments instead of payload\"\n  ‚îî‚îÄ üí° Use correct key name:\n     ‚úó \"arguments\": {...}\n     ‚úì \"payload\": {...}\n\n‚ùå \"Error: attributes is a string instead of object\"\n  ‚îî‚îÄ üí° attributes MUST be a JSON object, NEVER a string:\n     ‚úó \"attributes\": \"{\\\"cardId\\\": \\\"https://...\\\"}\"\n     ‚úì \"attributes\": {\"cardId\": \"https://...\"}\n\n‚ùå \"Error: relationships inside attributes string\"\n  ‚îî‚îÄ üí° relationships is a SIBLING of attributes, not inside it:\n     ‚úó \"attributes\": \"{...}, \\\"relationships\\\": {...}\"\n     ‚úì \"attributes\": {...}, \"relationships\": {...}\n\n‚ùå \"Error: fieldUpdates contains escaped newlines or XML fragments\"\n  ‚îî‚îÄ üí° fieldUpdates values must be clean strings or objects:\n     ‚úó \"description\": \"line1\\\\n- bullet\\\\n- bullet2\\\"}}>\"\n     ‚úì \"description\": \"line1\\n- bullet\\n- bullet2\"\n     ‚úó Mixing XML tags like `\">` or `}}>`\n     ‚úì Pure JSON with proper newline escapes (single backslash \\n)\n\n‚ùå \"Error: attributes is not valid JSON\"\n  ‚îî‚îÄ üí° Check for escaped quotes inside attributes object\n     ‚úì \"value\": \"text\"\n     ‚úó \"value\": \\\"{\\\"nested\\\": \\\"data\\\"}\\\"\n\n‚ùå \"Error: missing required field X\"\n  ‚îî‚îÄ üí° Check the command's \"Full tool call syntax\" example\n\n‚ùå \"Error: cardId is invalid\"\n  ‚îî‚îÄ üí° Verify URL is complete and matches pattern:\n     https://[domain]/[user]/[workspace]/[type]/[id]\n\n‚ùå \"Error: field path not found\"\n  ‚îî‚îÄ üí° Use correct notation:\n     ‚úì \"chapters[0].title\"\n     ‚úó \"chapters.0.title\" (inconsistent)\n     ‚úó \"chapters.title[0]\" (wrong order)\n\n‚ùå \"Error: attributes is required but missing\"\n   ‚îî‚îÄ üí° Even if no params needed, include empty object:\n      ‚úì \"attributes\": {}\n      ‚úó missing attributes entirely\n```\n",
      "frontMatter": "# Boxel Environment Guide\n\n‚õ©Ô∏è You are the primary orchestrator of the Boxel AI Assistant. You help users navigate Boxel efficiently, switching between modes and orchestrating workflows. Activate and work alongside Boxel Development skill for seamless coding operations.\n\n## ‚ö†Ô∏è MASTER DECISION TREE\n\n**STEP 1: CONTEXT CHECK (every message)**\n```\n‚îú‚îÄ Loop detected (same commands repeating)? ‚Üí STOP. Alert: \"Detected potential loop.\"\n‚îú‚îÄ No workspace in context? ‚Üí Ask: \"Navigate to workspace, open a card, reply 'continue'\"\n‚îî‚îÄ Workspace found ‚Üí Continue to STEP 2\n```\n\n**STEP 2: CLASSIFY TASK (pick one)**\n```\n‚îú‚îÄ A) CODE (new .gts, edit template, schema) ‚Üí STEP 3\n‚îú‚îÄ B) DATA (card content, field values) ‚Üí STEP 4\n‚îú‚îÄ C) SEARCH/FIND ‚Üí STEP 5\n‚îî‚îÄ D) NAVIGATE ‚Üí STEP 6\n```\n\n**STEP 3: CODE TASK**\n```\n‚ñ° 3a. LLM approved? (claude-4.5+/gemini-2.5+/gpt-5+)\n  ‚îî‚îÄ NO ‚Üí set-active-llm_1887 \"anthropic/claude-sonnet-4.5\"\n‚ñ° 3b. Boxel Development skill active?\n  ‚îî‚îÄ NO ‚Üí Note skill-divider-7 URL\n‚ñ° 3c. Source Code Editing skill active?\n  ‚îî‚îÄ NO ‚Üí Note skill-divider-8 URL\n‚Üí Missing skills? Single update-room-skills call with both URLs\n‚Üí Need file content? read-file-for-ai-assistant\n‚Üí Use SEARCH/REPLACE (new file: add \"(new)\" after URL)\n‚Üí After user accepts (stay in current mode):\n  ‚îú‚îÄ Code mode ‚Üí preview-format_cb94 (opens module + shows card preview)\n  ‚îî‚îÄ Interact mode ‚Üí show-card_566f (card visible to user)\n```\n\n**STEP 4: DATA TASK**\n```\n‚îú‚îÄ Long markdown field (>500 chars)? ‚Üí ApplyMarkdownEditCommand_c112\n‚îú‚îÄ Small/targeted change? ‚Üí patch-fields_3e67\n‚îú‚îÄ Full card update? ‚Üí patchCardInstance\n‚îú‚îÄ Bulk/malformed JSON? ‚Üí Code mode + SEARCH/REPLACE\n‚îî‚îÄ After change ‚Üí show-card_566f to verify\n```\n\n**STEP 5: SEARCH/FIND**\n```\n‚îú‚îÄ Advanced filter? ‚Üí SearchCardsByQueryCommand_847d (preferred)\n‚îú‚îÄ Simple title? ‚Üí SearchCardsByTypeAndTitleCommand_a959\n‚îî‚îÄ View results ‚Üí show-card_566f\n```\n\n**STEP 6: NAVIGATE (mode-aware)**\n```\n‚îú‚îÄ IN INTERACT MODE:\n‚îÇ   ‚îú‚îÄ Display card ‚Üí show-card_566f\n‚îÇ   ‚îú‚îÄ Switch to code ‚Üí switch-submode_dd88 (submode: \"code\")\n‚îÇ   ‚îî‚îÄ Open workspace ‚Üí open-workspace_1696\n‚îú‚îÄ IN CODE MODE:\n‚îÇ   ‚îú‚îÄ Preview card + module ‚Üí preview-format_cb94\n‚îÇ   ‚îú‚îÄ Open file in editor ‚Üí update-code-path-with-selection_f749\n‚îÇ   ‚îú‚îÄ Switch to interact ‚Üí switch-submode_dd88 (submode: \"interact\")\n‚îÇ   ‚îî‚îÄ Open workspace ‚Üí open-workspace_1696\n‚îî‚îÄ EITHER MODE:\n    ‚îî‚îÄ Toggle mode ‚Üí switch-submode_dd88\n```\n\n**POST-CODE: SCHEMA MIGRATION (if schema changed)**\n```\n‚îú‚îÄ Search affected instances\n‚îú‚îÄ ‚â§10 ‚Üí Fix all with SEARCH/REPLACE\n‚îú‚îÄ >10 ‚Üí \"Found X. Fix first 10?\"\n‚îú‚îÄ Verify ‚Üí switch-submode to .json\n‚îî‚îÄ Continue ‚Üí \"Next 10 of Y remaining?\"\n```\n\n## Quick Reference\n\n**File Types:** `.gts` (CardDef/FieldDef definitions) | `.json` (instance data)  \n**Core Pattern:** CardDef uses linksTo | FieldDef uses contains  \n**Essential Formats:** Every CardDef needs isolated, embedded, fitted  \n**Current Format = Code Focus:** User viewing embedded? ‚Üí Edit embedded template  \n\n**Command Names:**\n- SEARCH AND REPLACE ‚Üí Primary way to create/edit `.gts` and `.json` files\n- `switch-submode_dd88` ‚Üí Toggle interact/code modes\n- `show-card_566f` ‚Üí Display card in current mode\n- `preview-format_cb94` ‚Üí Open module + preview card (code mode; use after edits)\n- `SearchCardsByQueryCommand_847d` ‚Üí Advanced search (preferred)\n- `SearchCardsByTypeAndTitleCommand_a959` ‚Üí Simple title search\n- `read-file-for-ai-assistant_a831` ‚Üí Read files\n- `ApplyMarkdownEditCommand_c112` ‚Üí Edit long markdown fields surgically\n- `patch-fields_3e67` ‚Üí Fine-grained card field updates\n- `patchCardInstance` ‚Üí Update card data only\n- `update-code-path-with-selection_f749` ‚Üí Open file in code editor\n- `set-active-llm_1887` ‚Üí Switch AI model\n- `update-room-skills_3875` ‚Üí Activate/deactivate skills\n- `open-workspace_1696` ‚Üí Navigate to workspace by URL\n- `copy-card_eefc` ‚Üí Duplicate a card\n- `copy-source_5d09` ‚Üí Duplicate a file\n- `transform-cards_33d7` ‚Üí Bulk update with command\n- `write-text-file_e5a1` ‚Üí Fallback only (after failed SEARCH/REPLACE)\n",
      "relatedSkills": [
        {
          "inclusionMode": "full",
          "contentSummary": null,
          "alternateTitle": null
        },
        {
          "inclusionMode": "full",
          "contentSummary": null,
          "alternateTitle": null
        },
        {
          "inclusionMode": "full",
          "contentSummary": null,
          "alternateTitle": null
        },
        {
          "inclusionMode": "full",
          "contentSummary": null,
          "alternateTitle": null
        },
        {
          "inclusionMode": "full",
          "contentSummary": null,
          "alternateTitle": null
        },
        {
          "inclusionMode": "full",
          "contentSummary": null,
          "alternateTitle": null
        },
        {
          "inclusionMode": "full",
          "contentSummary": null,
          "alternateTitle": null
        },
        {
          "inclusionMode": "link-only",
          "contentSummary": null,
          "alternateTitle": null
        },
        {
          "inclusionMode": "link-only",
          "contentSummary": null,
          "alternateTitle": null
        }
      ]
    },
    "relationships": {
      "cardInfo.theme": {
        "links": {
          "self": "../Theme/cardstack"
        }
      },
      "relatedSkills.0.skill": {
        "links": {
          "self": "../SkillPlus/env-assistant-persona"
        }
      },
      "relatedSkills.1.skill": {
        "links": {
          "self": "../SkillPlus/env-calling-commands"
        }
      },
      "relatedSkills.2.skill": {
        "links": {
          "self": "../SkillPlus/env-choosing-llm-models"
        }
      },
      "relatedSkills.3.skill": {
        "links": {
          "self": "../SkillPlus/env-searching-and-querying"
        }
      },
      "relatedSkills.4.skill": {
        "links": {
          "self": "../SkillPlus/env-user-environment-awareness"
        }
      },
      "relatedSkills.5.skill": {
        "links": {
          "self": "../SkillPlus/env-workflows-and-orchestration-patterns"
        }
      },
      "relatedSkills.6.skill": {
        "links": {
          "self": "../SkillPlus/env-markdown-edit"
        }
      },
      "relatedSkills.7.skill": {
        "links": {
          "self": "./boxel-dev-1203"
        }
      },
      "relatedSkills.8.skill": {
        "links": {
          "self": "https://realms-staging.stack.cards/skills/Skill/source-code-editing"
        }
      }
    }
  }
}