{
  "data": {
    "meta": {
      "adoptsFrom": {
        "name": "SkillPlus",
        "module": "../skill-plus"
      }
    },
    "type": "card",
    "attributes": {
      "cardInfo": {
        "notes": null,
        "title": "Delegated Rendering",
        "description": "Field delegation, BoxelSelect, and avoiding circular relationships",
        "thumbnailURL": null
      },
      "commands": [],
      "instructions": "**Delegated rendering:**\n```hbs\n<!-- Always use @fields, even for singular -->\n<@fields.author @format=\"embedded\" />\n<@fields.items @format=\"embedded\" />\n```\n\n**Make cards clickable:**\n```hbs\n<CardContainer\n  {{@context.cardComponentModifier\n    cardId=card.url\n    format='data'\n  }}\n  @displayBoundaries={{true}}\n>\n  <card.component />\n</CardContainer>\n```\n\n**Avoid cycles:**\n```gts\n// Canonical links only\n@field supervisor = linksTo(() => Employee);\n\n// Query for reverse\nget directReportsQuery() {\n  return {\n    filter: {\n      on: { module: './employee', name: 'Employee' },\n      eq: { supervisor: this.args.model.id }\n    }\n  };\n}\n```\n\n### BoxelSelect: Smart Dropdown Menus\n\nRegular HTML selects are limited to plain text. BoxelSelect lets you create rich, searchable dropdowns with custom rendering.\n\n#### Pattern: Rich Select with Custom Options\n\n```gts\nexport class OptionField extends FieldDef { // ⁴³ Option field for select\n  static displayName = 'Option';\n  \n  @field key = contains(StringField);\n  @field label = contains(StringField);\n  @field description = contains(StringField);\n\n  static embedded = class Embedded extends Component<typeof this> {\n    <template>\n      <div class=\"option-display\">\n        <strong>{{if @model.label @model.label \"Unnamed Option\"}}</strong>\n        <span>{{if @model.description @model.description \"No description\"}}</span>\n      </div>\n    </template>\n  };\n}\n\nexport class ProductCategory extends CardDef { // ⁴⁴ Card using BoxelSelect\n  @field selectedCategory = contains(OptionField);\n  \n  static edit = class Edit extends Component<typeof this> { // ⁴⁵ Edit format\n    @tracked selectedOption = this.args.model?.selectedCategory;\n\n    options = [\n      { key: '1', label: 'Electronics', description: 'Phones, computers, and gadgets' },\n      { key: '2', label: 'Clothing', description: 'Fashion and apparel' },\n      { key: '3', label: 'Home & Garden', description: 'Furniture and decor' }\n    ];\n\n    updateSelection = (option: typeof this.options[0] | null) => {\n      this.selectedOption = option;\n      this.args.model.selectedCategory = option ? new OptionField(option) : null;\n    }\n\n    <template>\n      <FieldContainer @label=\"Product Category\" @tag=\"label\">\n        <BoxelSelect\n          @selected={{this.selectedOption}}\n          @options={{this.options}}\n          @onChange={{this.updateSelection}}\n          @searchEnabled={{true}}\n          @placeholder=\"Select a category...\"\n          as |option|\n        >\n          <div class=\"option-item\">\n            <span>{{option.label}}</span>\n            <span>{{option.description}}</span>\n          </div>\n        </BoxelSelect>\n      </FieldContainer>\n    </template>\n  };\n}\n```\n\n### Custom Edit Controls\n\nCreate user-friendly edit controls that accept natural input. Hide complexity in expandable sections while keeping ALL properties editable and inspectable.\n\n```gts\n// Example: Natural language time period input\nstatic edit = class Edit extends Component<typeof this> {\n  @tracked showDetails = false;\n  \n  parseInput = (value: string) => {\n    // Parse \"Q1 2025\" → quarter: 1, year: 2025, startDate: Jan 1, endDate: Mar 31\n    // Parse \"April 2025\" → month: 4, year: 2025, startDate: Apr 1, endDate: Apr 30\n  }\n  \n  <template>\n    <FieldContainer @label=\"Time Period\">\n      <input placeholder=\"e.g., Q1 2025 or April 2025\" {{on 'blur' this.parseInput}} />\n    </FieldContainer>\n    \n    <Button {{on 'click' (toggle 'showDetails' this)}}>\n      {{if this.showDetails \"Hide\" \"Show\"}} Details\n    </Button>\n    \n    {{#if this.showDetails}}\n      <!-- Show all parsed values for verification -->\n      <!-- Allow manual override of auto-parsed results -->\n      <!-- Provide controls for each field property -->\n    {{/if}}\n  </template>\n};\n```\n\n### Alternative: Using the viewCard API\n\nInstead of making entire cards clickable, you can create custom buttons or links that use the `viewCard` API to open cards in specific formats.\n\n#### Basic Implementation\n\n```javascript\nviewOrder = (order: ProductOrder) => {\n  // Open order in isolated view\n  this.args.viewCard(order, 'isolated');\n};\n\neditOrder = (order: ProductOrder) => {\n  // Open card in rightmost stack for side-by-side reference\n  // Useful for: 1) reference lookup, 2) edit panel on right while previewing on left\n  this.args.viewCard(order, 'edit', {\n    openCardInRightMostStack: true\n  });\n};\n\nviewReturnPolicy = () => {\n  // Open card using URL\n  const returnPolicyURL = new URL('https://app.boxel.ai/markinc/storefront/ReturnPolicy/return-policy-0525.json');\n  this.args.viewCard(returnPolicyURL, 'isolated');\n};\n```\n\n#### Template Example\n\n```hbs\n<div class=\"order-card\">\n  <!-- Custom action buttons -->\n  <div class=\"order-actions\">\n    <Button @kind=\"primary\" {{on \"click\" (fn this.viewOrder order)}}>\n      View Order\n    </Button>\n    \n    <Button @kind=\"secondary-light\" {{on \"click\" (fn this.editOrder order)}}>\n      Edit Order\n    </Button>\n  </div>\n  \n  <Button @kind=\"text-only\" {{on \"click\" (fn this.viewReturnPolicy)}}>\n    Return Policy\n  </Button>\n</div>\n```\n\n#### Available Formats\n\n- `'isolated'` - Read-oriented mode, may have some editable forms or interactive widgets\n- `'edit'` - Open card for full editing\n\n#### Use Cases\n- Multiple direct call-to-actions per card (view, edit)\n- More control over user interactions\n- Link to any card via a card URL"
    },
    "relationships": {
      "cardInfo.theme": {
        "links": {
          "self": "../Theme/cardstack"
        }
      }
    }
  }
}